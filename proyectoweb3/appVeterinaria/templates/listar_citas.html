{% extends "base.html" %}

{% block content %}
    {% comment %} usuario: {{ user.username }} {% endcomment %}
    <div class="d-flex justify-content-between align-items-center">
        <h1>LISTADO CITAS</h1>
        <div>
            <span class="p-2 rounded bg-info-subtle text-dark fw-bold">
                <a href="{% url 'crear_cita' %}">NUEVO REGISTRO</a> 
            </span>
        </div>
    </div>
    <ul>
        {% for cita in citas %}
            <li>
                {{ cita.id_cita }} - Fecha: {{ cita.fecha }} - Motivo: {{ cita.motivo }} - Estado: {{ cita.estado }} - Mascota: {{ cita.id_mascota.nombre }} - Veterinario: {{ cita.id_veterinario.nombre }}

                {% if user.is_superuser %}
                    {# Admin: Puede ELIMINAR y MODIFICAR #}
                <a href=" {% url 'eliminar_cita' cita.id_cita %}">ELIMINAR</a> | 
                <a href="{% url 'actualizar_cita' cita.id_cita %}">MODIFICAR</a> 
                
                {% elif user.is_staff %}
                    {# Staff: Solo puede MODIFICAR #}
                    | <a href="{% url 'actualizar_cita' cita.id_cita %}">MODIFICAR</a> 
                
                {% else %}
                    {# Usuario Normal: Solo Visualizar. No se muestran enlaces de acción #}
                    
                {% endif %}
                            </li>
        {% endfor %}
    </ul>

    {% if user.is_superuser or user.is_staff %}
        {# Admin y Staff pueden crear #}
    <a href="{% url 'crear_cita' %}">NUEVA CITA</a>
    {% endif %}
    
{% endblock %}
